module.exports=[92616,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(46893),f=a.i(5522),g=a.i(17171),h=a.i(3130),i=a.i(210),j=a.i(70106);let k=(0,j.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var l=a.i(25015),m=a.i(65385);let n=(0,j.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var o=a.i(34157),o=o;let p=(0,j.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),q=(0,j.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var r=a.i(15618);let s=(0,j.default)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),t=(0,j.default)("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),u=(0,j.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),v=(0,j.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),w=(0,j.default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var x=a.i(38246),y=a.i(95950),z=a.i(87682),A=a.i(80281);function B(){let[a,j]=(0,c.useState)(""),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!0),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(y.PRESET_MODELS),[T,U]=(0,c.useState)(y.PRESET_MODELS[0].id),V=R.find(a=>a.id===T)||R[0],W=R.length>0&&T===R[0].id,[X,Y]=(0,c.useState)(V),[Z,$]=(0,c.useState)(""),[_,aa]=(0,c.useState)("response"),ab=(0,c.useRef)(null);(0,c.useEffect)(()=>{"logs"===_&&ab.current&&ab.current.scrollIntoView({behavior:"smooth"})},[F,_]);let ac=(a,b)=>{Y(c=>({...c,[a]:b}))},ad=async()=>{if(!a.trim())return;E(!0),C(null),G([]),$(""),Q(!0),_||aa("response");let b=new Date().toLocaleTimeString(),c=[`[${b}] Starting request...`];G(c);try{if(N)if(c.push(`[${new Date().toLocaleTimeString()}] Calling streaming API with model: ${V.name}`),G([...c]),V.apiKey&&""!==V.apiKey.trim()&&V.connectionURL&&""!==V.connectionURL.trim()){c.push(`[${new Date().toLocaleTimeString()}] Using real API: /api/model-test`),G([...c]);let b=await fetch("/api/model-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a,config:{apiKey:V.apiKey,baseURL:V.baseURL,model:V.model,connectionURL:V.connectionURL}})});if(!b.ok){let a=await b.text();throw Error(a||`HTTP ${b.status}`)}if(!b.body)throw Error("No response body");let d=b.body.getReader(),e=new TextDecoder,f=!1,g="",h="";for(c.push(`[${new Date().toLocaleTimeString()}] Stream started`),G([...c]);!f;){let{value:a,done:b}=await d.read();if(f=b,a){let b=e.decode(a,{stream:!0}),c=(h+=b).split("\n");for(let a of(h=c.pop()||"",c))if(""!==a.trim()&&a.startsWith("data: "))try{let b=a.slice(6).trim();if(""===b)continue;let c=JSON.parse(b);if(c.done){f=!0;break}c.content&&(g+=c.content,$(g))}catch(a){}}}c.push(`[${new Date().toLocaleTimeString()}] Real API stream complete`),G([...c]),C({rawContent:JSON.stringify({object:"chat.completion",choices:[{message:{content:g}}]})})}else{c.push(`[${new Date().toLocaleTimeString()}] Using mock response (no API config)`),G([...c]);let a=`中国有四个直辖市，分别是：

1. **北京市**
   - 中国首都，政治、文化中心
   - 拥有故宫、天安门、长城等著名景点
   - 经济发达，科技创新能力强

2. **上海市**
   - 经济金融中心，国际化大都市
   - 外滩、东方明珠等标志性建筑
   - 贸易港口重要，商业繁荣

3. **天津市**
   - 北方重要港口城市
   - 近代工业发源地之一
   - 滨海新区是国家级开发区

4. **重庆市**
   - 西部直辖市，山城地貌
   - 长江上游重要城市
   - 火锅文化闻名，制造业发达

这四个直辖市在行政级别上与省相同，直接受中央政府管辖。`,b="",d=a.split(""),e=0,f=setInterval(()=>{e<d.length?(b+=d[e],$(b),e++):(clearInterval(f),c.push(`[${new Date().toLocaleTimeString()}] Mock stream complete`),G([...c]),C({rawContent:JSON.stringify({object:"chat.completion",choices:[{message:{content:b}}]})}))},50)}else throw c.push(`[${new Date().toLocaleTimeString()}] Calling standard API (Non-stream) with model: ${V.name}`),G([...c]),Error("Non-streaming mode is not supported in static export. Please use streaming mode.")}catch(a){c.push(`[${new Date().toLocaleTimeString()}] Error: ${a}`),G([...c]),console.error(a),$(b=>b+`

[System Error: ${String(a)}]`)}finally{E(!1)}};return(0,b.jsxs)("div",{className:"flex flex-col h-screen bg-slate-50 text-slate-800 overflow-hidden",children:[(0,b.jsxs)("header",{className:"flex-none h-16 border-b border-slate-200 bg-white px-6 flex items-center justify-between shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(x.default,{href:"/",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"hover:bg-slate-100 text-slate-600",children:(0,b.jsx)(i.ArrowLeft,{className:"h-5 w-5"})})}),(0,b.jsxs)("h1",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:["Model Test Console",(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700 text-xs font-medium",children:"v2.0"})]})]}),(0,b.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center",children:(0,b.jsxs)("div",{className:"bg-white p-1 rounded-lg border border-slate-200 shadow-sm flex gap-1 items-center",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm mr-2",children:[(0,b.jsx)(A.Switch,{id:"stream-mode",checked:N,onCheckedChange:O,className:"data-[state=checked]:bg-emerald-500"}),(0,b.jsxs)(g.Label,{htmlFor:"stream-mode",className:"text-xs font-medium text-slate-600 flex items-center gap-1 cursor-pointer",children:[(0,b.jsx)(w,{className:`w-3 h-3 ${N?"text-emerald-500 fill-emerald-500":"text-slate-400"}`}),"Stream"]})]}),(0,b.jsxs)("button",{onClick:()=>aa("response"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${"response"===_?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-200":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:[(0,b.jsx)(u,{className:"w-4 h-4"}),"Response"]}),(0,b.jsxs)("button",{onClick:()=>aa("json"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${"json"===_?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-200":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:[(0,b.jsx)(t,{className:"w-4 h-4"}),"Raw JSON"]}),(0,b.jsxs)("button",{onClick:()=>aa("logs"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${"logs"===_?"bg-amber-50 text-amber-700 shadow-sm ring-1 ring-amber-200":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:[(0,b.jsx)(s,{className:"w-4 h-4"}),"System Logs"]})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-slate-100 rounded-lg p-1",children:[(0,b.jsx)("span",{className:"text-xs font-medium text-slate-500 px-2",children:"Active:"}),(0,b.jsxs)(z.Select,{value:T,onValueChange:U,disabled:D||J,children:[(0,b.jsx)(z.SelectTrigger,{className:"h-7 w-[200px] text-xs bg-white border-slate-200 text-slate-700 focus:ring-emerald-500/50 shadow-sm",children:(0,b.jsx)(z.SelectValue,{})}),(0,b.jsx)(z.SelectContent,{className:"bg-white border-slate-200 text-slate-700",children:R.map((a,c)=>(0,b.jsxs)(z.SelectItem,{value:a.id,className:"text-xs focus:bg-slate-100 focus:text-emerald-600",children:[a.name," ",0===c&&(0,b.jsx)("span",{className:"text-slate-400 ml-1",children:"(Default)"})]},a.id))})]})]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>I(!0),className:"border-slate-200 bg-white text-slate-600 hover:bg-slate-50",children:[(0,b.jsx)(m.Settings2,{className:"mr-2 h-4 w-4"}),"Configure"]})]})]}),H&&(0,b.jsx)("div",{className:"absolute inset-0 z-50 bg-black/20 backdrop-blur-sm flex items-center justify-center p-4",children:(0,b.jsxs)(h.Card,{className:"w-full max-w-4xl bg-white shadow-2xl border-0 animate-in fade-in zoom-in-95 duration-200",children:[(0,b.jsxs)(h.CardHeader,{className:"flex flex-row items-center justify-between border-b border-slate-100 pb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.CardTitle,{className:"text-lg text-slate-800",children:"Configuration Manager"}),(0,b.jsx)("div",{className:"h-6 w-px bg-slate-200"}),(0,b.jsxs)(z.Select,{value:T,onValueChange:a=>{U(a),K(!1)},disabled:J,children:[(0,b.jsx)(z.SelectTrigger,{className:"w-[250px] h-9 bg-slate-50 border-slate-200",children:(0,b.jsx)(z.SelectValue,{placeholder:"Select Model"})}),(0,b.jsx)(z.SelectContent,{children:R.map((a,c)=>(0,b.jsxs)(z.SelectItem,{value:a.id,children:[a.name," ",0===c&&(0,b.jsx)("span",{className:"text-slate-400 ml-1 font-normal",children:"(Default)"})]},a.id))})]}),(0,b.jsxs)(d.Button,{size:"sm",variant:"ghost",onClick:()=>{let a=`custom-model-${Date.now()}`,b={id:a,name:"New Custom Model",baseURL:"https://api.example.com/v1",connectionURL:"https://api.example.com/v1/chat/completions",apiKey:"",model:"gpt-3.5-turbo",provider:"generic"};S([...R,b]),U(a),Y(b),K(!0),I(!0)},className:"text-emerald-600 hover:bg-emerald-50",disabled:J,children:[(0,b.jsx)(r.Plus,{className:"mr-1 h-4 w-4"}),"Add New"]})]}),(0,b.jsxs)(d.Button,{variant:"ghost",size:"icon",onClick:()=>I(!1),children:[(0,b.jsx)(i.ArrowLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,b.jsxs)(h.CardContent,{className:"pt-6 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-slate-500",children:"Configuration Name"}),(0,b.jsx)(f.Input,{value:J?X.name:V.name,onChange:a=>ac("name",a.target.value),disabled:!J,className:J?"border-emerald-500 ring-1 ring-emerald-500/20":"bg-slate-50"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-slate-500",children:"Model ID / Deployment Name"}),(0,b.jsx)(f.Input,{value:J?X.model:V.model,onChange:a=>ac("model",a.target.value),disabled:!J,className:`font-mono text-sm ${J?"border-emerald-500 ring-1 ring-emerald-500/20":"bg-slate-50"}`})]}),(0,b.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-slate-500",children:"API Base URL"}),(0,b.jsx)(f.Input,{value:J?X.baseURL:V.baseURL,onChange:a=>ac("baseURL",a.target.value),disabled:!J,placeholder:"https://api.example.com/v1",className:`font-mono text-sm ${J?"border-emerald-500 ring-1 ring-emerald-500/20":"bg-slate-50"}`})]}),(0,b.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-slate-500",children:"API Connection URL"}),(0,b.jsx)(f.Input,{value:J?X.connectionURL:V.connectionURL,onChange:a=>ac("connectionURL",a.target.value),disabled:!J,placeholder:"https://api.example.com/v1/chat/completions",className:`font-mono text-sm pr-10 ${J?"border-emerald-500 ring-1 ring-emerald-500/20":"bg-slate-50"}`}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Full endpoint URL used for API requests. System will use this directly without modifications."})]}),(0,b.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-slate-500",children:"API Key"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Input,{type:L||J?"text":"password",value:J?X.apiKey:V.apiKey,onChange:a=>ac("apiKey",a.target.value),disabled:!J,className:`font-mono text-sm pr-10 ${J?"border-emerald-500 ring-1 ring-emerald-500/20":"bg-slate-50"}`}),(0,b.jsx)("button",{onClick:()=>M(!L),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:L?(0,b.jsx)(q,{className:"h-4 w-4"}):(0,b.jsx)(p,{className:"h-4 w-4"})})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:J?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Button,{variant:"ghost",onClick:()=>{Y(V),K(!1)},children:"Cancel"}),(0,b.jsxs)(d.Button,{onClick:()=>{S(a=>a.map(a=>a.id===T?X:a)),K(!1),G(a=>[...a,`[System] Configuration updated for ${X.name}`])},className:"bg-emerald-600 hover:bg-emerald-500 text-white",children:[(0,b.jsx)(o.default,{className:"mr-2 h-4 w-4"})," Save Changes"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>{S([V,...R.filter(a=>a.id!==T)]),G(a=>[...a,`[System] Set ${V.name} as session default`])},disabled:W,className:W?"text-slate-400 bg-slate-50":"hover:text-slate-900 bg-transparent",children:W?"Current Default":"Set as Default"}),(0,b.jsxs)(d.Button,{variant:"outline",onClick:()=>{Y(V),K(!0)},children:[(0,b.jsx)(n,{className:"mr-2 h-4 w-4"})," Edit Config"]}),(0,b.jsx)(d.Button,{onClick:()=>I(!1),children:"Done"})]})})]})]})}),(0,b.jsxs)("main",{className:"flex-1 flex flex-col min-h-0 relative",children:[(0,b.jsx)("div",{className:"flex-1 flex flex-col bg-slate-50 min-h-0",children:(0,b.jsx)("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6 md:px-20 pb-6 custom-scrollbar",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto h-full",children:[!Z&&0===F.length&&!D&&(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 opacity-60 select-none",children:[(0,b.jsx)("div",{className:"w-24 h-24 rounded-3xl bg-slate-200 flex items-center justify-center mb-6",children:(0,b.jsx)(l.Play,{className:"w-10 h-10 text-slate-400 ml-1"})}),(0,b.jsx)("p",{className:"text-lg font-medium",children:"Ready to Test"}),(0,b.jsx)("p",{className:"text-sm",children:"Enter a prompt below to start the analysis"})]}),D&&!Z&&(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-emerald-600 animate-pulse",children:[(0,b.jsx)(k,{className:"w-10 h-10 animate-spin mb-4"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:"Waiting for API response..."})]}),Z||F.length>0?(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm min-h-[200px] overflow-hidden",children:["response"===_&&(0,b.jsx)("div",{className:"p-6 md:p-8",children:Z?(0,b.jsx)("div",{className:"prose prose-slate max-w-none",children:(0,b.jsx)("pre",{className:"whitespace-pre-wrap font-sans text-base leading-relaxed text-slate-800 bg-transparent border-0 p-0",children:Z})}):!D&&!N&&(0,b.jsx)("div",{className:"text-slate-400 italic text-center py-10",children:"No response content available yet."})}),"json"===_&&(0,b.jsx)("div",{className:"bg-slate-900 p-0 min-h-full",children:(0,b.jsx)("div",{className:"p-4 overflow-x-auto",children:B&&B.rawContent?(0,b.jsx)("pre",{className:"text-xs md:text-sm text-blue-300 font-mono",children:JSON.stringify(JSON.parse(B.rawContent),null,2)}):(0,b.jsx)("div",{className:"text-slate-500 italic p-4",children:"No JSON data captured."})})}),"logs"===_&&(0,b.jsxs)("div",{className:"bg-slate-950 p-4 min-h-full font-mono text-xs md:text-sm text-amber-400/90 space-y-1",children:[F.map((a,c)=>(0,b.jsx)("div",{className:"border-l-2 border-amber-900/30 pl-3 py-1 hover:bg-white/5 transition-colors",children:a},c)),(0,b.jsx)("div",{ref:ab})]})]}):null]})})}),(0,b.jsx)("div",{className:"flex-none px-4 sm:px-6 md:px-20 pb-8 pt-2 bg-slate-50",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto relative",children:[(0,b.jsxs)("div",{className:"relative flex items-end gap-2 bg-white p-2 rounded-2xl shadow-xl border border-slate-200 ring-1 ring-slate-200/50 focus-within:ring-emerald-500/30 focus-within:border-emerald-500/50 transition-all",children:[(0,b.jsx)(e.Textarea,{value:a,onChange:a=>j(a.target.value),placeholder:"Send a message to test the model...",className:"flex-1 min-h-[60px] max-h-[200px] border-0 shadow-none resize-none bg-transparent p-3 text-base focus-visible:ring-0 placeholder:text-slate-400",onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),ad())}}),(0,b.jsx)(d.Button,{onClick:ad,disabled:D||!a.trim(),className:`h-12 w-12 rounded-xl flex-none mb-0.5 transition-all ${D?"bg-slate-100 text-slate-400":"bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg shadow-emerald-600/20"}`,children:D?(0,b.jsx)(k,{className:"h-6 w-6 animate-spin"}):(0,b.jsx)(v,{className:"h-5 w-5 ml-0.5"})})]}),(0,b.jsx)("div",{className:"text-center mt-3",children:(0,b.jsx)("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider font-medium",children:"Press Enter to Send • Shift + Enter for new line"})})]})})]})]})}a.s(["default",()=>B],92616)}];

//# sourceMappingURL=app_model-test_page_tsx_a29c68c8._.js.map